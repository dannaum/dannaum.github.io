$.fn.isInViewport = function () {
  var e = $(this).offset().top,
    t = e + $(this).outerHeight(),
    s = $(window).scrollTop(),
    r = s + $(window).height();
  return t > s && e < r;
};
for (
  var resizeDone, b = document.getElementsByClassName("animated-word"), a = 0;
  a < b.length;
  a++
) {
  var e = b.item(a);
  e.innerHTML = e.innerHTML.replace(
    /(^|<\/?[^>]+>|\s+)([^\s<]+)/g,
    '$1<span class="letter">$2</span>'
  );
}
var aPlayed = !1;
function animationsRender() {
  if ($(window).width() > 991) {
    var e,
      t = anime.timeline({ loop: !1, autoplay: !1 });
    t.add({
      targets: ".fadeup0 .letter",
      translateY: [100, 0],
      translateZ: 0,
      opacity: [0, 1],
      easing: "easeOutQuint",
      duration: 800,
      delay: (e, t) => 30 * t,
      begin() {
        $(".fadeup0").css("opacity", "1");
      },
    }),
      t.play(),
      $(window).focus(function () {
        aPlayed || (t.restart(), (aPlayed = !0));
      });
    var s = anime.timeline({ loop: !1, autoplay: !1 });
    s.add({
      targets: ".fadeup1 .letter",
      translateY: [100, 0],
      translateZ: 0,
      opacity: [0, 1],
      easing: "easeOutQuint",
      duration: 800,
      delay: (e, t) => 300 + 30 * t,
      begin() {
        $(".fadeup1").css("opacity", "1");
      },
    });
    var r = anime.timeline({ loop: !1, autoplay: !1 });
    r.add({
      targets: ".fadeup2 .letter",
      translateY: [100, 0],
      translateZ: 0,
      opacity: [0, 1],
      easing: "easeOutQuint",
      duration: 800,
      delay: (e, t) => 300 + 30 * t,
      begin() {
        $(".fadeup2").css("opacity", "1");
      },
    });
    var n = anime.timeline({ loop: !1, autoplay: !1 });
    n.add({
      targets: ".fadeup3 .letter",
      translateY: [100, 0],
      translateZ: 0,
      opacity: [0, 1],
      easing: "easeOutQuint",
      duration: 800,
      delay: (e, t) => 300 + 30 * t,
      begin() {
        $(".fadeup3").css("opacity", "1");
      },
    });
    var o = anime.timeline({ loop: !1, autoplay: !1 });
    o.add({
      targets: ".fadeup4 .letter",
      translateY: [100, 0],
      translateZ: 0,
      opacity: [0, 1],
      easing: "easeOutQuint",
      duration: 800,
      delay: (e, t) => 300 + 30 * t,
      begin() {
        $(".fadeup4").css("opacity", "1");
      },
    });
    var l = anime.timeline({ loop: !1, autoplay: !1 });
    l.add({
      targets: ".fadeup5 .letter",
      translateY: [100, 0],
      translateZ: 0,
      opacity: [0, 1],
      easing: "easeOutQuint",
      duration: 800,
      delay: (e, t) => 300 + 30 * t,
      begin() {
        $(".fadeup5").css("opacity", "1");
      },
    });
    var c = !1,
      d = $(".home-page_hero-visual"),
      p = d.width();
    $(window).scrollTop(),
      $(window).height(),
      $(window).scroll(function () {
        if (
          ((e = $(this).scrollTop()),
          d.width(e + p),
          $(".fadeup1").isInViewport())
        )
          s.play();
        else if ($(".fadeup2").isInViewport()) {
          r.play();
          var t = $(".careers_chart-legend")
            .find("._8_fundcards_parent")
            .find("._8_fundcards");
          if (
            ($(t).each(function (e) {
              var t = $(this);
              setTimeout(function (e) {
                t.click();
              }, 100 * e);
            }),
            !c)
          ) {
            var h = new Chart(document.getElementById("myChart"), config);
            document
              .querySelector("#first-chart")
              .addEventListener("click", function e() {
                h.isDatasetVisible(0),
                  h.isDatasetVisible(1),
                  h.isDatasetVisible(2),
                  h.show(0),
                  h.hide(1),
                  h.hide(2);
              }),
              document
                .querySelector("#second-chart")
                .addEventListener("click", function e() {
                  h.isDatasetVisible(0),
                    h.isDatasetVisible(1),
                    h.isDatasetVisible(2),
                    h.hide(0),
                    h.show(1),
                    h.hide(2);
                }),
              document
                .querySelector("#third-chart")
                .addEventListener("click", function e() {
                  h.isDatasetVisible(0),
                    h.isDatasetVisible(1),
                    h.isDatasetVisible(2),
                    h.hide(0),
                    h.hide(1),
                    h.show(2);
                }),
              document
                .querySelector("#all-chart")
                .addEventListener("click", function e() {
                  h.isDatasetVisible(0),
                    h.isDatasetVisible(1),
                    h.isDatasetVisible(2),
                    h.show(0),
                    h.show(1),
                    h.show(2);
                }),
              dragDetector(),
              (c = !0);
          }
        } else
          $(".chart-timeline").isInViewport()
            ? ($(".chart-timeline-line").click(),
              $(".chart-single-item_animation").each(function (e) {
                var t = $(this);
                setTimeout(function () {
                  t.click();
                }, 150 * e);
              }))
            : $(".careers_values-title").isInViewport()
            ? n.play()
            : $(".fadeup4").isInViewport()
            ? o.play()
            : $(".fadeup5").isInViewport()
            ? l.play()
            : $(".positions_section").isInViewport() &&
              $(".positions_grid-single-job").each(function (e) {
                $(this).find("._8_fundcards").trigger("click");
              });
      });
  } else {
    var h = new Chart(document.getElementById("myChart"), config);
    document
      .querySelector("#first-chart")
      .addEventListener("click", function e() {
        h.isDatasetVisible(0),
          h.isDatasetVisible(1),
          h.isDatasetVisible(2),
          h.show(0),
          h.hide(1),
          h.hide(2);
      }),
      document
        .querySelector("#second-chart")
        .addEventListener("click", function e() {
          h.isDatasetVisible(0),
            h.isDatasetVisible(1),
            h.isDatasetVisible(2),
            h.hide(0),
            h.show(1),
            h.hide(2);
        }),
      document
        .querySelector("#third-chart")
        .addEventListener("click", function e() {
          h.isDatasetVisible(0),
            h.isDatasetVisible(1),
            h.isDatasetVisible(2),
            h.hide(0),
            h.hide(1),
            h.show(2);
        }),
      document
        .querySelector("#all-chart")
        .addEventListener("click", function e() {
          h.isDatasetVisible(0),
            h.isDatasetVisible(1),
            h.isDatasetVisible(2),
            h.show(0),
            h.show(1),
            h.show(2);
        }),
      dragDetector();
  }
}
animationsRender(),
  $(".blue-highlight").wrap('<span class="tool-tip_wrapper"></span>');
var highlight = [],
  tip_single = [],
  tip_single_elems = [];
$(".blue-highlight").each(function (e, t) {
  highlight.push($(this).text().toLocaleLowerCase().trim());
}),
  $(".tool-tip_single_wrapper").each(function (e, t) {
    tip_single.push(
      $(this).find(".tool-tip_title").text().toLocaleLowerCase().trim()
    ),
      tip_single_elems.push($(this));
  });
for (var i = 0; i < highlight.length; i++)
  for (var j = 0; j < tip_single.length; j++)
    if (highlight[i] == tip_single[j]) {
      var t = $(".blue-highlight").eq(i).attr("href");
      $(".blue-highlight")
        .eq(i)
        .parent()
        .append(
          ' <div class="tool-tip_single_wrapper"><div class="tool-tip_single"><div class="tool-tip_title-wrap">MOONFARE GLOSSARY</div><div class="tool-tip_content"><p class="paragraph-medium bottom-margin-i-m tool-tip_title">' +
            $(tip_single_elems[j]).find(".tool-tip_title").text() +
            '</p><p class="paragraph-small bottom-margin-i-l tool-tip_paragraph">' +
            $(tip_single_elems[j]).find(".tool-tip_paragraph").text() +
            '</p><a class="text-link" href="' +
            $(tip_single_elems[j]).find(".text-link").attr("href") +
            '">Visit Glossary</a></div></div></div>'
        );
    }
$(".tool-tip_wrapper").mouseenter(function () {
  $(this).find(".tool-tip_single_wrapper").css("display", "block");
}),
  $(".tool-tip_wrapper").mouseleave(function () {
    $(this).find(".tool-tip_single_wrapper").css("display", "none");
  }),
  $(".tool-tips").remove(),
  $.getJSON(
    "https://boards-api.greenhouse.io/v1/boards/moonfare/departments?render_as=list",
    function (e) {
      var e = e.departments,
        t = $(".positions_grid-right");
      $.each(e, function (e, s) {
        if (s.jobs.length > 0) {
          var r = s.name;
          $(".positions_filter-tags-departments").append(
            '<a href="#" class="positions_single-tag w-inline-block" data-depname="' +
              r +
              '"><div class="dept-name">' +
              r +
              "</div></a>"
          );
          let n = $('<div class="positions_grid-team"></div>');
          $(
            '<div class="positions_grid-title-wrapper"><h3 class="h4 color-text-white bottom-margin-i-xl" data-depname="' +
              r +
              '">' +
              s.name +
              "</h3></div>"
          ).appendTo(n),
            $.each(s.jobs, function (e, s) {
              let o = $('<div class="positions_grid-job-list"></div>').appendTo(
                n
              );
              $(
                '<div class="_8_fundcards"></div><div class="positions_grid-single-job" data-jobid="' +
                  s.id +
                  '" data-jobloc="' +
                  s.location.name +
                  '" data-depname="' +
                  r +
                  '"><div><p class="paragraph-medium color-text-white">' +
                  s.title +
                  '</p><p class="paragraph-medium color-text-white">' +
                  s.location.name +
                  '</p></div><img class="careers-arrow-icon" src="https://uploads-ssl.webflow.com/5fd0f5501ea5ad3d2b7f9c33/62ab54d1a565a57a507df176_pale-arrow.svg" alt=""></div>'
              ).appendTo(o),
                t.append(n);
            });
        }
      });
    }
  ),
  $.getJSON(
    "https://boards-api.greenhouse.io/v1/boards/moonfare/offices?render_as=list",
    function (e) {
      var t = e.offices;
      $.each(t, function (e, t) {
        t.name.length > 0 &&
          $(".positions_filter-tags-locations").append(
            '<a href="#" class="positions_single-tag w-inline-block" data-jobloc="' +
              t.name +
              '"><div class="loc-name">' +
              t.name +
              "</div></a>"
          );
      });
    }
  ),
  $(".positions_grid-right").on(
    "click",
    ".positions_grid-single-job",
    function () {
      var e = $(this).data("jobid");
      window.location.href = "/open-position?gh_jid=" + e;
    }
  ),
  $(".careers_chart-legend-single-item").click(function () {
    $(".careers_chart-legend-single-item").removeClass("active"),
      $(this).toggleClass("active");
  }),
  $(".chart-single-icon-wrap").mouseenter(function () {
    $(this).find(".chart-hover-child").css("display", "block");
  }),
  $(".chart-single-icon-wrap").mouseleave(function () {
    $(this).find(".chart-hover-child").css("display", "none");
  });
var totalTeams = $(".our-teams_slider").find(".our-teams_slider-single").length,
  screenWidth = $(window).width(),
  ourTeamsSlider = $(".our-teams_slider-single").outerWidth(),
  ourTeamsDrag = new Dragdealer("our-team-drag", {
    horizontal: !0,
    vertical: !1,
    xPrecision: ourTeamsSlider,
    animationCallback: function (e, t) {
      $(".our-teams_drag-line-active").css("width", Math.round(100 * e) + "%"),
        $(".our-teams_slider").css(
          "margin-left",
          -e * (ourTeamsSlider * totalTeams - screenWidth + 32)
        );
    },
  });
$(".our-teams_slider-wrap").on(
  "click",
  ".our-teams_slider-right-arrow",
  function () {
    var e = (ourTeamsDrag.getValue() + "").split(","),
      t = e[0],
      s = e[1];
    ourTeamsDrag.setValue(parseFloat(t) + 0.1, s);
  }
),
  $(".our-teams_slider-wrap").on(
    "click",
    ".our-teams_slider-left-arrow",
    function () {
      var e = (ourTeamsDrag.getValue() + "").split(","),
        t = e[0],
        s = e[1];
      ourTeamsDrag.setValue(parseFloat(t) - 0.1, s);
    }
  );
var chartSlider = $("#myChart").outerWidth(),
  timelineSlide = $(".chart-timeline_wrap").outerWidth(),
  myChartDrag = new Dragdealer("careers-drag", {
    horizontal: !0,
    vertical: !1,
    xPrecision: chartSlider,
    animationCallback: function (e, t) {
      $(".careers-chart_drag-line-active").css(
        "width",
        Math.round(100 * e) + "%"
      ),
        $("#myChart").css("margin-left", -e * (chartSlider - timelineSlide)),
        $(".chart-timeline").css(
          "margin-left",
          -e * (chartSlider - timelineSlide)
        );
    },
  });
function dragDetector() {
  var e = $(window).width(),
    t = $(".our-teams_slider").find(".our-teams_slider-single").length,
    s = $(".our-teams_slider-single").outerWidth();
  ourTeamsDrag = new Dragdealer("our-team-drag", {
    horizontal: !0,
    vertical: !1,
    xPrecision: s,
    animationCallback: function (r, n) {
      $(".our-teams_drag-line-active").css("width", Math.round(100 * r) + "%"),
        $(".our-teams_slider").css("margin-left", -r * (s * t - e + 32));
    },
  });
  var r = Math.round($("#myChart").outerWidth()),
    n = Math.round($(".chart-timeline_wrap").outerWidth());
  (myChartDrag = new Dragdealer("careers-drag", {
    horizontal: !0,
    vertical: !1,
    xPrecision: r,
    animationCallback: function (e, t) {
      $(".careers-chart_drag-line-active").css(
        "width",
        Math.round(100 * e) + "%"
      ),
        $("#myChart").css("margin-left", -e * (r - n)),
        $(".chart-timeline").css("margin-left", -e * (r - n));
    },
  })),
    n + 1 < r
      ? $(".careers_chart-drag-element").css("opacity", "1")
      : $(".careers_chart-drag-element").css("opacity", "0");
}
$(".hiring-steps_dt").click(function () {
  $(".hiring-step_icon").removeClass("opened-hiring-step-bg"),
    $(".hiring-step_icon-img").removeClass("opened-hiring-step_icon-img"),
    $(this).hasClass("w--open")
      ? ($(".hiring-step_icon").removeClass("opened-hiring-step-bg"),
        $(".hiring-step_icon-img").removeClass("opened-hiring-step_icon-img"))
      : ($(this)
          .closest(".hiring-steps_single")
          .find(".hiring-step_icon")
          .addClass("opened-hiring-step-bg"),
        $(this)
          .closest(".hiring-steps_single")
          .find(".hiring-step_icon-img")
          .addClass("opened-hiring-step_icon-img"));
}),
  $(".hiring-steps_single").click(function () {
    $(this).find(".hiring-steps_dt").trigger("click");
  }),
  dragDetector();
var cachedWidth = $(window).width();
function doneResizing() {
  (screenWidth = $(window).width()) > 991 &&
    $(
      ".animated-word, .animated-content, .animated-image, .animated-hero-visual, ._5_text_blocks, ._8_fundcards_parent, ._9_tagblock, ._9_tag_animation_parent, .animated-button, .animated-pill-button"
    ).css("opacity", "1"),
    dragDetector();
}
function pageLoaded() {
  (screenWidth = $(window).width()) <= 991 &&
    $(
      ".animated-word, .animated-content, .animated-image, .animated-hero-visual, ._5_text_blocks, ._8_fundcards_parent, ._9_tagblock, ._9_tag_animation_parent, .animated-button, .animated-pill-button"
    ).css("opacity", "1");
}
$(window).resize(function () {
  var e = $(window).width();
  e !== cachedWidth &&
    (clearTimeout(resizeDone),
    (resizeDone = setTimeout(doneResizing, 500)),
    (cachedWidth = e));
}),
  pageLoaded(),
  screenWidth > 991 &&
    ($(".single-career-grid-wrap-left").click(function () {
      var e = $(this),
        t = $(".single-career-grid-wrap-single"),
        s = $(this).find(".single-career-expansion-animate");
      $(e).hasClass("active-left")
        ? ($(t).animate({ opacity: 0 }, 500),
          $(e).find(".h6").animate({ opacity: 0 }, 500),
          $(e).find(".paragraph-medium").animate({ opacity: 0 }, 500),
          setTimeout(function () {
            s.animate({ width: "250px", height: "250px" }, 500);
          }, 500),
          setTimeout(function () {
            $(".single-career-grid-wrap-left").removeClass("active-left"),
              $(".single-career-grid-wrap-right").removeClass("active-right"),
              $(".single-career-value-p-wrap").css("height", "0rem");
          }, 500),
          setTimeout(function () {
            $(t).animate({ opacity: 1 }, 500),
              $(e).find(".h6").animate({ opacity: 1 }, 500),
              $(e).find(".paragraph-medium").animate({ opacity: 1 }, 500);
          }, 1e3))
        : ($(t).animate({ opacity: 0 }, 500),
          $(e).find(".h6").animate({ opacity: 0 }, 500),
          $(e).find(".paragraph-medium").animate({ opacity: 0 }, 500),
          setTimeout(function () {
            $(".single-career-grid-wrap-left").removeClass("active-left"),
              $(".single-career-grid-wrap-right").removeClass("active-right"),
              $(".single-career-value-p-wrap").css("height", "0rem"),
              $(e).find(".single-career-value-p-wrap").css("height", "auto"),
              $(e).addClass("active-left");
          }, 500),
          setTimeout(function () {
            s.animate({ width: "100%", height: "100%" }, 500);
          }, 500),
          setTimeout(function () {
            $(t).animate({ opacity: 1 }, 500),
              $(e).find(".h6").animate({ opacity: 1 }, 500),
              $(e).find(".paragraph-medium").animate({ opacity: 1 }, 500);
          }, 1e3));
    }),
    $(".single-career-grid-wrap-right").click(function () {
      var e = $(this),
        t = $(".single-career-grid-wrap-single"),
        s = $(this).find(".single-career-expansion-animate");
      $(e).hasClass("active-right")
        ? ($(t).animate({ opacity: 0 }, 500),
          $(e).find(".h6").animate({ opacity: 0 }, 500),
          $(e).find(".paragraph-medium").animate({ opacity: 0 }, 500),
          setTimeout(function () {
            s.animate({ width: "250px", height: "250px" }, 500);
          }, 500),
          setTimeout(function () {
            $(".single-career-grid-wrap-left").removeClass("active-left"),
              $(".single-career-grid-wrap-right").removeClass("active-right"),
              $(".single-career-value-p-wrap").css("height", "0rem");
          }, 500),
          setTimeout(function () {
            $(t).animate({ opacity: 1 }, 500),
              $(e).find(".h6").animate({ opacity: 1 }, 500),
              $(e).find(".paragraph-medium").animate({ opacity: 1 }, 500);
          }, 1e3))
        : ($(t).animate({ opacity: 0 }, 500),
          $(e).find(".h6").animate({ opacity: 0 }, 500),
          $(e).find(".paragraph-medium").animate({ opacity: 0 }, 500),
          setTimeout(function () {
            $(".single-career-grid-wrap-left").removeClass("active-left"),
              $(".single-career-grid-wrap-right").removeClass("active-right"),
              $(".single-career-value-p-wrap").css("height", "0rem"),
              $(e).find(".single-career-value-p-wrap").css("height", "auto"),
              $(e).addClass("active-right");
          }, 500),
          setTimeout(function () {
            s.animate({ width: "100%", height: "100%" }, 500);
          }, 500),
          setTimeout(function () {
            $(t).animate({ opacity: 1 }, 500),
              $(e).find(".h6").animate({ opacity: 1 }, 500),
              $(e).find(".paragraph-medium").animate({ opacity: 1 }, 500);
          }, 1e3));
    }));
