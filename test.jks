$(document).ready(function () {
    $(".move-letter").each(function () {
        var a = $(this).text().toLowerCase(),
            b = $(this).closest(".glossary-letter-content_content-single");
        console.log(a),
            $(".count-letter").each(function () {
                var c = $(this).text().toLowerCase(),
                    d = $(this).closest(".glossary-letter-content").find(".glossary-letter-content_content");
                a == c && b.appendTo(d);
            });
    }),
        $(".copy-clipboard-link").click(function () {
            var b, a;
            (b =
                "https://www.moonfare.com/glossary?glossary=" +
                $(this)
                    .siblings(".hs5")
                    .text()
                    .toLowerCase()
                    .replace(/\s+/g, "")
                    .replace(/[^a-z0-9]/g, "")),
                (a = document.createElement("textarea")),
                document.body.appendChild(a),
                (a.value = b),
                a.select(),
                document.execCommand("copy"),
                document.body.removeChild(a);
        }),
        $(".hs5").each(function () {
            var a = $(this)
                .text()
                .toLowerCase()
                .replace(/\s+/g, "")
                .replace(/[^a-z0-9]/g, "");
            $(this).parent().attr("id", a);
        }),
        $(".form-field-empty").on("input", function () {
            var a = $(this).val().toLowerCase();
            $(".glossary-search-result").each(function () {
                $(this).text().toLowerCase().indexOf(a) > -1 ? $(this).css("display", "block") : $(this).css("display", "none");
            }),
                "" == a && $(".glossary-search-result").hide();
        }),
        $("#email-form").on("submit", function () {
            return event.preventDefault(), !1;
        }),
        $(".glossary-letter-content").each(function () {
            0 == $(this).find(".glossary-letter-content_content-single").length && $(this).closest(".w-dyn-item").remove();
        });
    var b = [];
    $(".count-letter").each(function () {
        b.push($(this).text().toLowerCase());
    }),
        $(".glossary-letter").each(function () {
            -1 == $.inArray($(this).text().toLowerCase(), b) ? $(this).addClass("inactive") : $(this).addClass("countable");
        });
    var a = $(".navbar_section").outerHeight(),
        c = $(".glossary-navigation").outerHeight(),
        d = {};
    $(".glossary-letters").outerWidth();
    var e = $(".glossary-letter").outerWidth();
    $(window).scroll(function () {
        $("div.glossary-letter-content").each(function () {
            var b = $(this);
            d[b.find(".count-letter").text()] = (function (e) {
                var f = $(window).height(),
                    a = $(document).scrollTop(),
                    b = e.offset().top,
                    c = e.height(),
                    g = a - b,
                    h = b + c - (a + f);
                if (a > b + c || b > a + f) return 0;
                var d = 100;
                return g > 0 && (d -= (100 * g) / c), h > 0 && (d -= (100 * h) / c), d;
            })(b);
            var c = 0,
                f = 0;
            for (var a in d) d[a] > c && ((c = d[a]), (f = a));
            $(".count-letter").each(function () {
                if ($(this).text() == f) {
                    var a = $(this).closest(".glossary-letter-content").index(".glossary-letter-content");
                    $(".countable").removeClass("active"),
                        $(".countable").find(".glossary-letter-active").removeClass("active"),
                        $(".countable").eq(a).addClass("active"),
                        $(".countable").eq(a).find(".glossary-letter-active").addClass("active");
                    var b = a * e;
                    $(".glossary-letters").animate({ scrollLeft: b }, 0);
                }
            });
        });
    }),
        $(".glossary-search-result").on("click", function () {
            var b = $(this).text();
            $(".hs5").each(function () {
                $(this).text() == b && $("html, body").animate({ scrollTop: $(this).offset().top - a - c }, 1e3);
            }),
                $(".form-field-empty").val(""),
                $(".glossary-search-result").css("display", "none");
        }),
        $(".countable").on("click", function () {
            var b = $(this).index(".countable");
            $("html, body").animate({ scrollTop: $(".glossary-letter-content").eq(b).offset().top - a - c }, 1e3);
        }),
        $(".glossary-navigation").css("top", a);
    var f = (function (d) {
        var b,
            a,
            c = window.location.search.substring(1).split("&");
        for (a = 0; a < c.length; a++) if ((b = c[a].split("="))[0] === d) return void 0 === b[1] || decodeURIComponent(b[1]);
        return !1;
    })("glossary");
    $(".hs5").each(function () {
        $(this)
            .text()
            .toLowerCase()
            .replace(/\s/g, "")
            .replace(/[^a-zA-Z0-9]/g, "") == f && $("html, body").animate({ scrollTop: $(this).offset().top - a - c }, 1e3);
    });
});
